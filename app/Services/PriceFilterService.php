<?php

namespace App\Services;

use App\Models\Country;

class PriceFilterService
{
    /**
     * Get price slabs for a specific country
     */
    public function getPriceSlabsForCountry(string $countryCode): array
    {
        return match ($countryCode) {
            'in' => [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000, 60000, 70000, 80000, 90000, 100000, 120000, 150000, 200000],
            'au', 'us', 'uk', 'sg' => [50, 100, 200, 300, 400, 500, 600, 700, 800, 1000, 1200, 1500, 2000],
            'ae', 'sa', 'qa' => [100, 200, 300, 400, 500, 600, 700, 1000, 1500, 2000, 2500, 3000, 4000, 5000, 6000, 7000],
            'es', 'de', 'fr', 'it', 'nl', 'be', 'mt', 'ie', 'fi', 'at', 'hr', 'cy', 'ee', 'gr', 'pt' => [50, 100, 200, 300, 400, 500, 600, 700, 800, 1000, 1200, 1500, 2000],
            'ca' => [50, 100, 200, 300, 400, 500, 600, 700, 800, 1000, 1200, 1500, 2000, 2500],
            'mx' => [2500, 3000, 3500, 4000, 5000, 6000, 7000, 10000, 15000, 20000, 30000, 40000, 50000, 60000],
            'br' => [500, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 12000],
            'jp' => [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000, 60000, 70000, 80000, 90000, 100000, 120000, 150000, 200000, 250000],
            'se' => [1000, 2000, 2500, 3000, 3500, 4000, 5000, 6000, 7000, 10000, 12000, 15000, 20000],
            'pl' => [500, 1000, 2000, 2500, 3000, 3500, 4000, 5000, 6000, 7000, 10000, 12000],
            default => [500, 1000, 2000, 2500, 3000, 3500, 4000, 5000, 6000, 7000, 10000, 12000], // Pakistan default
        };
    }

    /**
     * Calculate price bounds for a given amount
     */
    public function calculatePriceBounds(int $amount, array $slabs): array
    {
        $lowerAmount = 0;
        $upperBound = $amount;

        for ($i = 0; $i < count($slabs); $i++) {
            if ($amount == $slabs[$i]) {
                $lowerAmount = $i > 0 ? $slabs[$i - 1] : 0;
                $upperBound = $slabs[$i];
                break;
            }
        }

        return [
            'min' => $lowerAmount,
            'max' => $upperBound
        ];
    }
}
